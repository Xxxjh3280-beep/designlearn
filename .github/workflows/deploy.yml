name: Deploy to GitHub Pages

on:
  push:
    # å½“æ¨é€åˆ° main åˆ†æ”¯æ—¶è§¦å‘éƒ¨ç½²
    branches:
      - main
  # å…è®¸æ‰‹åŠ¨ä» Actions æ ‡ç­¾é¡µè§¦å‘éƒ¨ç½²
  workflow_dispatch:

# è®¾ç½®æƒé™ï¼Œéƒ¨ç½²åˆ° GitHub Pages éœ€è¦
permissions:
  contents: read
  pages: write
  id-token: write

# å–æ¶ˆæ‰€æœ‰å…ˆå‰è¿è¡Œçš„ä½œä¸š
concurrency:
  cancel-in-progress: true
  group: pages

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    # Job å†…éƒ¨æƒé™ï¼ˆå·²ç¡®è®¤æ­£ç¡®ï¼‰
    permissions:
      contents: read
      pages: write
      id-token: write
    
    steps:
      - name: â¬‡ï¸ Checkout ä»“åº“ä»£ç 
        uses: actions/checkout@v4
        
      - name: ğŸŸ¢ è®¾ç½®ç¯å¢ƒ & å®‰è£…ä¾èµ–
        # è´Ÿè´£è®¾ç½® Node.js ç¯å¢ƒã€å®‰è£… pnpm CLIï¼Œå¹¶è¿è¡Œ pnpm install
        uses: pnpm/action-setup@v3
        with:
          version: 8 
          run_install: true
          
      - name: ğŸ› ï¸ æ„å»ºé¡¹ç›®
        run: pnpm run build
        
      # æ³¨æ„ï¼šVite æ„å»ºé»˜è®¤è¾“å‡ºåˆ° 'dist' ç›®å½•
      - name: ğŸš€ éƒ¨ç½²åˆ° GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          # ä½¿ç”¨ GitHub Token è¿›è¡Œè®¤è¯
          github_token: ${{ secrets.GITHUB_TOKEN }}
          
          # ğŸŒŸ å…³é”®ä¿®æ”¹ 1: æ˜ç¡®æŒ‡å®šéƒ¨ç½²çš„ç›®æ ‡ä»“åº“ (è¯·ç¡®ä¿è¿™ä¸ªè·¯å¾„æ­£ç¡®!)
          repository: Xxxjh3280-beep/designlearn 

          # ğŸŒŸ å…³é”®ä¿®æ”¹ 2: æ˜ç¡®æŒ‡å®šæœºå™¨äººèº«ä»½å’Œé‚®ç®±ï¼Œç¡®ä¿ git æäº¤åˆæ³•
          user_name: github-actions[bot]
          user_email: github-actions[bot]@users.noreply.github.com
          
          # è¦éƒ¨ç½²çš„æ„å»ºç›®å½• (é»˜è®¤æ˜¯ dist)
          publish_dir: ./dist
          # éƒ¨ç½²åˆ†æ”¯ï¼Œé€šå¸¸ä½¿ç”¨ gh-pages
          publish_branch: gh-pages
          # æäº¤ä¿¡æ¯
          commit_message: "Deploy to GitHub Pages from ${{ github.ref }}"